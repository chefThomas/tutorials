(window["webpackJsonpphonebook-app"]=window["webpackJsonpphonebook-app"]||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=n(14),l=n(2),i=function(e){var t=e.onSubmit,n=e.onNameChange,a=e.onNumberChange,o=e.numberValue,c=e.nameValue;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:n,value:c})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var t=e.name,n=e.number,a=e.deleteMe,o=e.id;return r.a.createElement("li",null,t," ",n," ",r.a.createElement("button",{onClick:function(e){a(o)}},"delete"))},m=function(e){var t=e.filter;return r.a.createElement("div",null,"filter:",r.a.createElement("input",{type:"text",onChange:function(e){t(e.target.value)}}))},d=function(e){var t=e.message;return r.a.createElement("div",null,t)},f=n(3),b=n.n(f),p="http://localhost:3001/persons";function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),f=Object(l.a)(c,2),g=f[0],v=f[1],y=Object(a.useState)(""),E=Object(l.a)(y,2),O=E[0],j=E[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),P=k[0],S=k[1],C=Object(a.useState)(""),N=Object(l.a)(C,2),D=N[0],V=N[1];Object(a.useEffect)(function(){b.a.get(p).then(function(e){var t=e.data;console.log(t),o(t)}).catch(function(e){return console.log("error",e)})},[]);var x=function(e){window.confirm("Are you sure you want to do that?")&&function(e){return b.a.delete("".concat(p,"/").concat(e))}(e).then(function(t){o(n.filter(function(t){return t.id!==e})),J("delete")}).catch(function(e){console.log(e),J("already deleted")})},B=function(e){return e.map(function(e){return r.a.createElement(s,{key:e.id,id:e.id,name:e.name,number:e.number,deleteMe:x})})},J=function(e,t){switch(e){case"update":V("entry updated");break;case"delete":V("entry deleted");break;case"already deleted":V("this entry has already been deleted. refresh page to update");break;case"incomplete":V("You must enter both name and number");break;case"invalid entry":V(t);break;default:V("")}setTimeout(function(){V("")},3e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement("div",{style:{height:"1rem",marginBottom:"0.5rem"}}),r.a.createElement(i,{onSubmit:function(e){if(e.preventDefault(),0!==g.length&&0!==O.length){var t,a,r=n.find(function(e){return e.name===g});if(r&&window.confirm("".concat(g," is already in the phonebook. Update number?"))){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{number:O});console.log("updated person obj: ",c),(t=r.id,a=c,b.a.put("".concat(p,"/").concat(t),a)).then(function(e){console.log("in update numb",e.data),o(n.map(function(t){return t.id!==c.id?t:e.data})),J("update"),v(""),j("")}).catch(function(e){return console.log("updated person catch: ",e)})}else{console.log("made it to else in post"),function(e){return b.a.post(p,e)}({name:g,number:O}).then(function(e){console.log("res.data in postNewPerson: ",e.data),o(n.concat(e.data)),console.log("persons state in postNewPerson: ",n),v(""),j("")}).catch(function(e){var t=e.response.data.message;t.includes("Person validation failed")&&J("invalid entry",t)})}}else J("incomplete")},onNameChange:function(e){return v(e.target.value)},onNumberChange:function(e){return j(e.target.value)},nameValue:g,numberValue:O}),r.a.createElement("h3",null,"Filter"),r.a.createElement(m,{filter:function(e){var t=n.filter(function(t){return t.name.includes(e)});S(t)}}),r.a.createElement("h2",null,"Numbers")," ",D.length>1?r.a.createElement(d,{message:D}):"",r.a.createElement("ul",null,B(P||n)))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7df9eac4.chunk.js.map